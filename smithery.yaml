build:
  dockerfile: Dockerfile
  dockerBuildPath: .

startCommand:
  type: stdio
  configSchema:
    type: object
    required: []
    properties:
      NODE_ENV:
        type: string
        description: Node environment (development/production)
        enum: ["development", "production"]
        default: "production"
      LOG_LEVEL:
        type: string
        description: Logging level for the server
        enum: ["error", "warn", "info", "debug"]
        default: "info"
      NPM_TOKEN:
        type: string
        description: Optional NPM token for private package access
      CACHE_TTL:
        type: number
        description: Cache time-to-live in seconds
        minimum: 0
        default: 3600
  commandFunction: |
    (config) => ({
      command: "node",
      args: ["dist/index.js"],
      env: {
        NODE_ENV: config.NODE_ENV || "production",
        LOG_LEVEL: config.LOG_LEVEL || "info",
        NPM_TOKEN: config.NPM_TOKEN || "",
        CACHE_TTL: String(config.CACHE_TTL || 3600)
      }
    }) 